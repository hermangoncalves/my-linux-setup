#!/bin/bash
. /etc/os-release

_lang_ () {
    langfile="${LANG:0:2}"
}

_invoke_() {
    echo "Invoking"
    if [[ -z "$menu" ]]; then
        fatal "No menu specified to invoke."
    fi

    local url="https://raw.githubusercontent.com/hermangoncalves/my-linux-setup/main/src/menus/${menu}.sh"

    if ! curl -fsSL "$url" >/dev/null 2>&1; then
        fatal "Could not fetch menu script '$menu' from $url"
    fi

    source <(curl -fsSL "$url")
}

_not_implemented_yet () {
    zenity --info --text="Menu not implemented yet"
}

_check_flatpak_() {
    if command -v flatpak &> /dev/null; then
        flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo --user
        flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo --system
        return 0
    fi

    if [[ "$ID_LIKE" == *debian ]] || [[ "$ID_LIKE" == *debian ]]; then
        echo "Installing flatpak..."
        sudo apt install -y
    fi
}